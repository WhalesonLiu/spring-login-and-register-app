<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>新型冠状病毒感染的肺炎疫情情况</title>
  <div th:replace="fragments/header"/>
</head>
<body>

<div th:replace="fragments/navbar :: header('index')"/>
<main role="main" class="container">
  <div class="container">

    <div style="margin-top:20px">
        <form  id="add-2019-nCoV-form">
          <fieldset>
            <h3>当前信息录入</h3>

            <div th:if="${success}">
              <div class="alert alert-success" th:text="${success}"/>
            </div>
            <div th:if="${warning}">
              <div class="alert alert-warning" th:text="${warning}"/>
            </div>
            <div class="form-group row">
              <input type="date" name="date" id="date" class="form-control col-lg-3 input-lg"
                     placeholder="日期"  autofocus="true" autocomplete="off"/>
            </div>
            <div class="form-group row">
              <input type="number" name="newConfirmedCasesNationwide" id="newConfirmedCasesNationwide" class="form-control col-lg-3"
                     placeholder="新增确诊病例(例)-全国"  autocomplete="off"/>
              <input type="number" name="newConfirmedCasesHuBei" id="newConfirmedCasesHuBei" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增确诊病例(例)-湖北"  autocomplete="off"/>
              <input type="text" name="newConfirmedCasesRemark" id="newConfirmedCasesRemark" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增确诊病例(例)-备注"  autocomplete="off"/>
            </div>
            <div class="form-group row">
              <input type="number" name="newSevereCasesNationwide"  id="newSevereCasesNationwide" class="form-control col-lg-3"
                     placeholder="新增重症病例(例)-全国"  autocomplete="off"/>
              <input type="number" name="newSevereCasesHuBei"  id="newSevereCasesHuBei" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增重症病例(例)-湖北"  autocomplete="off"/>
              <input type="text" name="newSevereCasesRemark"  id="newSevereCasesRemark" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增重症病例(例)-备注" autocomplete="off"/>
            </div>
            <div class="form-group row">
              <input type="number" name="newDeathsNationwide"  id="newDeathsNationwide" class="form-control col-lg-3"
                     placeholder="新增死亡病例(例)-全国"  autocomplete="off"/>
              <input type="number" name="newDeathsHuBei" id="newDeathsHuBei" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增死亡病例(例)-湖北"  autocomplete="off"/>
              <input type="text" name="newDeathsRemark" id="newDeathsRemark" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增死亡病例(例)-备注"  autocomplete="off"/>
            </div>
            <div class="form-group row">
              <input type="number" name="newCuredCasesNationwide"  id="newCuredCasesNationwide" class="form-control col-lg-3"
                     placeholder="新增治愈出院病例(例)-全国"  autocomplete="off"/>
              <input type="number" name="newCuredCasesHuBei"  id="newCuredCasesHuBei" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增治愈出院病例(例)-湖北"  autocomplete="off"/>
              <input type="text" name="newCuredCasesRemark" id="newCuredCasesRemark" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增治愈出院病例(例)-备注" autocomplete="off"/>
            </div>

            <div class="form-group row">
              <input type="number" name="newSuspectedCasesNationwide" id="newSuspectedCasesNationwide" class="form-control col-lg-3 "
                     placeholder="新增疑似病例(例)-全国"   autocomplete="off"/>
              <input type="number" name="newSuspectedCasesHuBei" id="newSuspectedCasesHuBei" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增疑似病例(例)-湖北"   autocomplete="off"/>
              <input type="text" name="newSuspectedCasesRemark" id="newSuspectedCasesRemark" class="form-control col-lg-3 offset-lg-1 input-lg"
                     placeholder="新增疑似病例(例)-备注"   autocomplete="off"/>
            </div>
            <h3>截止日期信息录入</h3>
            <div class="form-group row">
              <input type="date" name="beforeDate" id="beforeDate" class="form-control col-lg-3  input-lg"
                     placeholder="截止日期"   autocomplete="off" />
            </div>
            <div class="form-group row">
                <input type="number" name="cumulativeConfirmedCases"  id="cumulativeConfirmedCases" class="form-control col-lg-3 "
                   placeholder="累计确诊病例(例)-全国"  autocomplete="off"/>
                <input type="text" name="cumulativeConfirmedCasesRemark" id="cumulativeConfirmedCasesRemark" class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="累计确诊病例(例)-备注"  autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="severeCase"  class="form-control col-lg-3 "
                   placeholder="重症病例-全国" autocomplete="off"/>
                <input type="text" name="severeCaseRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="重症病例-备注" autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="cumulativeDeaths"  class="form-control col-lg-3 "
                   placeholder="累计死亡病例-全国" autocomplete="off"/>
                <input type="text" name="cumulativeDeathsRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="累计死亡病例-备注" autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="cumulativeCuredCases"  class="form-control col-lg-3 "
                   placeholder="累计治愈出院病例-全国" autocomplete="off"/>
                <input type="text" name="cumulativeCuredCasesRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="累计治愈出院病例-备注" autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="suspectedCase"  class="form-control col-lg-3 "
                   placeholder="疑似病例-全国"  autocomplete="off"/>
                <input type="text" name="suspectedCaseRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="疑似病例-备注"  autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="closeContacts"  class="form-control col-lg-3 "
                   placeholder="密切接触者(人)-全国" autocomplete="off"/>
                <input type="text" name="closeContactsRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="密切接触者(人)-备注" autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="dismissed"  class="form-control col-lg-3 "
                   placeholder="当日解除医学观察(人)-全国" autocomplete="off"/>
                <input type="text" name="dismissedRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="当日解除医学观察(人)-备注" autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="watching"  class="form-control col-lg-3 "
                   placeholder="正在接受医学观察(人)-全国" autocomplete="off"/>
                <input type="text" name="watchingRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="正在接受医学观察(人)-备注"  autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="cumulativeConfirmedCasesHongKong"  class="form-control col-lg-3 "
                   placeholder="香港特别行政区通报确诊病例(例)"  autocomplete="off"/>
                <input type="text" name="cumulativeConfirmedCasesHongKongRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="香港特别行政区通报确诊病例(例)-备注" autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="cumulativeConfirmedCasesMacao"  class="form-control col-lg-3 "
                   placeholder="澳门特别行政区通报确诊病例(例)"  autocomplete="off"/>
                <input type="text" name="cumulativeConfirmedCasesMacaoRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="澳门特别行政区通报确诊病例(例)-备注"  autocomplete="off"/>
            </div>
            <div class="form-group row">
                <input type="number" name="cumulativeConfirmedCasesTaiwan"  class="form-control col-lg-3 "
                   placeholder="台湾地区通报确诊病例(例)"  autocomplete="off"/>
                <input type="text" name="cumulativeConfirmedCasesTaiwanRemark"  class="form-control col-lg-3 offset-lg-1 input-lg"
                   placeholder="台湾地区通报确诊病例(例)-备注"  autocomplete="off"/>
            </div>

            <div class="form-group row">
              <input type="submit" id="NCoV-add-submit-btn" class="btn btn-lg btn-primary btn-block center-block col-lg-4 offset-lg-4" value="新增"/>
            </div>
          </fieldset>
        </form>
    </div>

  </div>
</main>

<footer>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://cdn.bootcss.com/echarts/4.4.0-rc.1/echarts.min.js"></script>
</footer>
</body>
<script type="text/javascript">

    $(function($){
        //添加新型冠状病毒感染的肺炎疫情情况
        var addNCIForm = $('#add-2019-nCoV-form');
        //新型冠状病毒感染的肺炎疫情情况折线图推叠图
        //获取form表单里所有input的name和placeholder
        console.log(addNCIForm);


        var addNCIFormArrays = addNCIForm.serializeArray();
        console.log(addNCIFormArrays);
        console.log(addNCIForm.serialize());
        //点击添加一条新型冠状病毒感染的肺炎疫情情况
        addNCIForm.submit(function (data) {

            var addNCIObj = {};
            var addNCIFormArray = addNCIForm.serializeArray();
            $.each(addNCIFormArray, function() {

                if(this.name =='date' || this.name == 'beforeDate'){
                    addNCIObj[this.name] = new Date(this.value);
                }else {
                    addNCIObj[this.name] = this.value;
                }
            });
            console.log(addNCIFormArray);
            console.log(addNCIObj);

            $.ajax({
                async : false,
                type : 'POST',
                url : '/2019-nCoV',
                data : JSON.stringify(addNCIObj),//400
                contentType: "application/json;charset=utf-8",
                success : function(expressResult) {
                    alert('OK~');
                    console.log(expressResult);
                },
                dataType : 'json'
            });

            return false;
        });
    })
</script>
</html>